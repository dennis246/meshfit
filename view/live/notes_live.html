
<html>
    <head>

        <link rel="shortcut icon" href="#">
        <style>
            body {
 font-family: 'Calibri';
}

.tableHeader {
font-size: 2rem;
padding:0px;
}

 input[type="text"] {
 padding: 0.4rem;
 width: 100%;
 border: 0 0 1px 0 solid black;
 outline: none;
 font-family: 'Calibri';

 }

 textarea {
font-family: 'Calibri';
 font-size: 1rem;
    width: 100%;
 }

  .panel {

 }

 .header, .details {
 position: relative;
 }

 .ip  {
     width: 100%;
    position: absolute;
    top: 0; left: 0;
    z-index: 1;
 }


 #updateBtn {
 position:fixed;
 padding:0.5rem;
 border-radius:50px;
 top:5rem;
 right:2rem;
 border: 0 0 1px solid black;

 outline:none;border-radius:5px;



 }



        </style>

    </head>

    <body>
     <form method="post"  >
        <div class="tableHeader">
<p>Notes<p>
</div>

<table>
<div style="padding:0.5rem;" ><tr>

<div  class="panel" style="border:1px solid black; border-radius:5px;
font-family:calibri;padding:1rem 1rem;"  >

    <div  class="header" style="font-size:18px;font-weight:bold;"  >

            <div class="op" >
                    <p>the response body content</p>
            </div>

            <div class="ip" style="visibility:hidden;" >
                    <input type="text" value="the response body content" style="width:100%;overflow:scroll;" />
            </div>

    </div>


    <div  style="border:1px solid black; border-width:1px 0 0 0;"  />

        <div  class="details" >
            <div class="op" >
                <p>Otherwise, we fetch the response body content as JSON by calling the json() method of Response , and log one of its values. Note that like fetch() itself, json() is asynchronous, as are all the other methods to access the response body content.Epcot is a theme park at Walt Disney World Resort featuring exciting attractions, international pavilions, award-winning fireworks and seasonal special events</p>
            </div>

            <div class="ip" style="visibility:hidden;" >
                <textarea style="width:100%;overflow:scroll;" rows="5" columns="100" >Otherwise, we fetch the response body content as JSON by calling the json() method of Response , and log one of its values. Note that like fetch() itself, json() is asynchronous, as are all the other methods to access the response body content.Epcot is a theme park at Walt Disney World Resort featuring exciting attractions, international pavilions, award-winning fireworks and seasonal special events"</textarea>
             </div>
        </div>

    </div>
    <div class="rowNum" style="color:transparent;z-index:0;padding:0;margin:0;font-size:0px;" >1</div>



</div>


</tr>
</div>
<div style="padding:0.2rem;" />
<div style="padding:0.5rem;" ><tr>

<div  class="panel" style="border:1px solid black; border-radius:5px;
font-family:calibri;padding:1rem 1rem;"  >

    <div  class="header" style="font-size:18px;font-weight:bold;"  >

            <div class="op" >
                    <p>minimal function</p>
            </div>

            <div class="ip" style="visibility:hidden;" >
                    <input type="text" value="minimal function" style="width:100%;overflow:scroll;" />
            </div>

    </div>


    <div  style="border:1px solid black; border-width:1px 0 0 0;"  />

        <div  class="details" >
            <div class="op" >
                <p>The Fetch API provides a JavaScript interface for making HTTP requests and processing the responses. Fetch is the modern replacement for XMLHttpRequest : unlike XMLHttpRequest , which uses callbacks, Fetch is promise-based and is integrated with features of the modern web such as service workers and Cross-Origin Resource Sharing (CORS). With the Fetch API, you make a request by calling global function in both window and fetch() , which is available as a worker contexts. You pass it a Request object or a string containing the URL to fetch, along with an optional argument to configure the request. The fetch() function returns a Promise which is fulfilled with a Response object representing the server's response. You can then check the request status and extract the body of the response in various formats, including text and JSON, by calling the appropriate method on the response. Here's a minimal function that uses fetch() to retrieve some JSON data from a server</p>
            </div>

            <div class="ip" style="visibility:hidden;" >
                <textarea style="width:100%;overflow:scroll;" rows="5" columns="100" >The Fetch API provides a JavaScript interface for making HTTP requests and processing the responses. Fetch is the modern replacement for XMLHttpRequest : unlike XMLHttpRequest , which uses callbacks, Fetch is promise-based and is integrated with features of the modern web such as service workers and Cross-Origin Resource Sharing (CORS). With the Fetch API, you make a request by calling global function in both window and fetch() , which is available as a worker contexts. You pass it a Request object or a string containing the URL to fetch, along with an optional argument to configure the request. The fetch() function returns a Promise which is fulfilled with a Response object representing the server's response. You can then check the request status and extract the body of the response in various formats, including text and JSON, by calling the appropriate method on the response. Here's a minimal function that uses fetch() to retrieve some JSON data from a server"</textarea>
             </div>
        </div>

    </div>
    <div class="rowNum" style="color:transparent;z-index:0;padding:0;margin:0;font-size:0px;" >2</div>



</div>


</tr>
</div>
<div style="padding:0.2rem;" />
<div style="padding:0.5rem;" ><tr>

<div  class="panel" style="border:1px solid black; border-radius:5px;
font-family:calibri;padding:1rem 1rem;"  >

    <div  class="header" style="font-size:18px;font-weight:bold;"  >

            <div class="op" >
                    <p>A case-sensitive string representing the event type to listen</p>
            </div>

            <div class="ip" style="visibility:hidden;" >
                    <input type="text" value="A case-sensitive string representing the event type to listen" style="width:100%;overflow:scroll;" />
            </div>

    </div>


    <div  style="border:1px solid black; border-width:1px 0 0 0;"  />

        <div  class="details" >
            <div class="op" >
                <p>The object that receives a notification (an object that implements the Event interface) when an event of the specified type occurs. This must be null, an object with a handleEvent() method, or a JavaScript function. See The event listener callback for details on the callback itself.</p>
            </div>

            <div class="ip" style="visibility:hidden;" >
                <textarea style="width:100%;overflow:scroll;" rows="5" columns="100" >The object that receives a notification (an object that implements the Event interface) when an event of the specified type occurs. This must be null, an object with a handleEvent() method, or a JavaScript function. See The event listener callback for details on the callback itself."</textarea>
             </div>
        </div>

    </div>
    <div class="rowNum" style="color:transparent;z-index:0;padding:0;margin:0;font-size:0px;" >3</div>



</div>


</tr>
</div>
<div style="padding:0.2rem;" />
</table>
<div class="fileUpload" style="display:inline;" >
<tr>
<p>#{filename}</p>
<button onclick="initiateFileAdd();" >Add File</button>
</tr>

    <image src=#{imageData}" />

</div>
<div class="toolbarStyle"><button type="submit" formmethod="post" name="Update" id="AZl2O" listener="updateGrid" styleClass="defaultAbsoluteStyle" style="position:fixed;padding:10px;right:2rem;border-radius:10rem;" ><button id="updateBtn" type="submit" >Update</button>
</div></div>
     </form>

     <script>
            
var toggleMode = 1;
//var currentTagParam = '';
var rowNum = 0;

(function () {
    var panelComps = document.getElementsByClassName('panel');
    console.log(panelComps);

    for (var i = 0; i < panelComps.length; i++) {

        //var opdivtag = panelComps[i].querySelector('.output');
       
       var opGrptags = panelComps[i].querySelectorAll('.op');
        for (var j = 0; j < opGrptags.length; j++) {
            opGrptags[j].style.cursor = 'pointer';
            opGrptags[j].addEventListener('click', editPart, false);
        }
    }


    //attach button listener

    var updateBtn = document.querySelector('#updateBtn');
    updateBtn.addEventListener('click', updateNote);
    var x = document.querySelector('.panel');
    console.log(x);

})();


function updateNote(){
    console.log('in updateNote', this);

    var postTo = '/App1/notes';
    var x = document.querySelector('.panel');
    console.log("posting:",x);
    var xhr = new XMLHttpRequest();
    xhr.open("POST", postTo, true); 
    //xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.send(x.outerHTML);
}


function editPart() {

    console.log('in editPart', this);
    var parentClassName = this.parentElement.className;
    var className = this.className;
    var invClassName;

    if (className === "op") {
        invClassName = className.replace("op", "ip");
    } else {
        invClassName = className.replace("ip", "op");
    }

    if (toggleMode === 1) {

        this.style.visibility = 'hidden';
        var xiptag = this.parentElement.querySelector('.'+invClassName);
        xiptag.style.visibility = 'visible';
        xiptag.addEventListener('focusout', editPart);
        xiptag.className = invClassName;

    } else {
        this.style.visibility = 'hidden';
        console.log(this.parentElement.parentElement);
        var xopdivtag = this.parentElement.parentElement.querySelector('.'+invClassName);
        xopdivtag.style.visibility = 'visible';
        var xoptag = xopdivtag.querySelector('p');

        var iptag = this.querySelector(parentClassName === 'header' ? 'input' : 'textarea'); 
       // xoptag.innerHTML = iptag.value; 
       xoptag.innerHTML = parentClassName === 'header' ? iptag.value : iptag.innerHTML; 
    }

    toggleMode *= -1;

}


function postContent() {
    console.log("inside PostContent fn");
    var postTo = '/App1/notes1';
    var x = document.getElementById('container');
    console.log(x);
    var xhr = new XMLHttpRequest();
    xhr.open("POST", postTo, true);
    //xhr.setRequestHeader('Content-Type', 'application/json');
    xhr.send(x.outerHTML);
}

async function readFileAsText(file) {
    return file.text();
}

function uploadContent() {

    const fileInput = document.getElementById("file");
    var filesList = fileInput.files;
    console.log(filesList);

    const fs = readFileAsText(filesList[0]);
    var fsEnc = btoa(fs);
    console.log(fs);
    console.log(fsEnc);

    const request1 = new Request("/App1/notes", {
        method: "POST",
        body: fs,
    });
}

function initiateFileAdd() {
    var postTo = '/App1/fileAdd';
    var x = 'javaCmd::fileAdd';
    console.log(x);
    var xhr = new XMLHttpRequest();
    xhr.open("POST", postTo, true);
    xhr.send(x);
}




        </script>
    </body>
</html>


